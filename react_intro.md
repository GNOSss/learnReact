/\*

대규모 웹 서비스의 UI를 편하고 빠르게 개발하기 위한 기술
메타에서 개발한 프론트엔드를 위한 오픈소스

React 기술 특징

1. 컴포넌트를 기반으로 UI를 표현한다.
2. 화면 업데이트 구현이 쉽다.
3. 화면 업데이트가 빠르게 처리된다.

---

1. 컴포넌트(Component) : 구성요소
   화면을 구성하는 요소, UI를 구성하는 요소를 말함
   개발하는 코드의 중복성을 최소한으로 낮추고 재사용성을 늘리는 것은 중요하다 ??

- 마크업(Mark UP) : UI 구현이라고 생각하시면 됩니다.

2. 화면 업데이트 구현이 쉽다.
   업데이트란? 사용자의 행동(클릭,드래그)에 따라 웹 페이지가 스스로 모습을 바꿔 상호작용 하는 것
   React.js에서는 화면 업데이트를 구현하기 쉽다. [ 선언형 프로그래밍 ]
   [선언형 프로그래밍]이란?
   과정은 생략하고 목적만 간결히 명시하는 방법입니다.
   반대로 [명령형 프로그래밍]도 있습니다.
   목적을 이루기 위한 모든 일련의 과정을 설명하는 방법입니다.

React는 선언형 프로그래밍 , 목적만 깔끔하게 명시하여 코드가 간결
Javascript는 명령형 프로그래밍 , 모든 과정을 하나 하나 다 설명, 코드가 길고 복잡

2-1.그래서 선언형 프로그래밍의 원리가 무엇인가 ??
리액트는 컴포넌트 단위로 개발하게 되고
각각의 컴포넌트에는 State라는 특수한 상태를 나타내는 변수가 있습니다.
이 State의 값이 바뀌면 컴포넌트가 바뀐 State값에 따라서 랜더링을 달리 할 수 있습니다.

3. 화면 업데이트가 빠르게 처리된다.
   리액트는 화면 업데이트를 매우 쉽게 구현하고 동시에 매우 빠른 속도로 처리할 수 있다고 합니다.
   이를 어떻게 가능한건지 알기 전에 선수지식으로 브라우저 작동에 대해서 알아야 합니다.

브라우저의 렌더링 과정 (Critical Rendering Path)
HTML -> DOM \
 Render Tree -> Layout -> Painting
CSS -> CSSOM /

1. HTML, CSS 를 DOM, CSSOM으로 변환합니다.
   DOM(Documnet Object Model)은 컴퓨터가 HTML을 해석하기 쉽게 객체 모델로 변환한겁니다.(문서객체모델)
   CSSOM 또한 브라우저가 더 이해하기 쉽게 변환한 모델입니다.

2. Render Tree : 웹 페이지의 청사진
   화면에 렌더링되어야 하는 요소들의 모든 정보가 다 포함이 되어있어야합니다.
   그렇기 때문에 이런 렌더 트리를 웹페이지의 청사진이라고 알아두면 되겠습니다.

3. Layout : 요소의 배치를 잡는 작업
   웹페이지라는 공간 안에 렌더트리에 포함되어 있는 요소들의 배치를 잡는 거라고 합니다.
   헤더, 바디, 풋터등 위치를 계산해서 배치는 잡는 작업이 레이아웃이라고 합니다.

4. Painting : 실제로 화면에 그려내는 과정

---

    그러면 이때 화면의 업데이트는 어떻게 발생하게 되는 걸까요 ???

-> 화면의 업데이트는 자바스크립트가 DOM을 수정하게 되면 발생하게 됩니다.
DOM이 수정되면 브라우저는 Critical Rendering Path(렌더링 과정)의 전체 단계를 다시 진행하게 됩니다. 렌더 트리를 다시 생성하고 레이아웃을 다시 잡고 페인팅을 다시하게 됩니다.
즉, 렌더링되는 요소가 변경이 되면서 업데이트가 실제로 이루지게 되는 거죠

    한가지 주의해야 할 사실이 있는데요.
    Critical Rendering Path의 전체 과정들 중에 이 3단계에 해당하는
    레이아웃과 4단계에 해당하는 페인팅은 꽤나 오래 걸리는 과정입니다.
    그렇기에 DOM이 수정되어 Layout이 다시 진행되는 것을 Reflow
    Painting이 다시 진행되는 것을 Repaint라고 합니다.
    Reflow, Repaint은 오래 걸립니다.

    만약 자바스크립트의 코드가 몇천 번 수정이 된다고하면
    Reflow, Repaint 또한 몇천 번의 수정이 이루어지는데 이는 브라우저에 과부하를 일으켜 오류를 야기합니다.

    그렇기때문에 코드를 작성할때는 DOM을 계속해서 수정하게 만들지 말고
    '동시에 발생한 업데이트를 모아두고' 다 모였다면 한 번에 수정하기를 권장해야합니다.
    그런데 누구나 이렇게 코드를 잘 만들지 못합니다.
    React는 이 과정을 자동으로 도와줍니다. (알아서 자동으로 처리 ?)

    어떻게 그럴 수 있을까요?
    React는 Virtual Dom이라는 기능이 있습니다.
    이 Virtual Dom은
    - 자바스크립트 객체로 흉내낸 것으로 일종의 복제판이라고 생각하면 되고
    - React는 업데이트가 발생하면 실제 DOM을 수정하기 전에 이 가상의 복제판 DOM에 먼저 반영해본다. (연습 스윙 같은 느낌??이라고 생각하면 된다.)
    즉, Virtual DOM을 먼저 업데이트 반영해보고 동시에 발생한 업데이트가 모이면 한 번에 Actual Dom(실제 DOM)에 반영하게 됩니다.

\*/
